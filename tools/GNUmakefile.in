#
# EMULAB-COPYRIGHT
# Copyright (c) 2000-2006 University of Utah and the Flux Group.
# All rights reserved.
#

SRCDIR		= @srcdir@
TESTBED_SRCDIR	= @top_srcdir@
OBJDIR		= ..
SUBDIR		= tools

include $(OBJDIR)/Makeconf

SUBDIRS = teachswitch webcamapplet whol svn

ifneq ($(host_cpu),arm)
SUBDIRS += pcapper
endif

all:	all-subdirs

include $(TESTBED_SRCDIR)/GNUmakerules

ifeq ($(host_cpu),arm)
client:
client-install:
else
client:
	$(MAKE) -C pcapper client

client-install: client
	$(MAKE) -C pcapper client-install
endif

post-install:
	@$(MAKE) -C whol post-install

clean:	clean-subdirs

# How to recursively descend into subdirectories to make general
# targets such as `all'.
%.MAKE:
	@$(MAKE) -C $(dir $@) $(basename $(notdir $@))
%-subdirs: $(addsuffix /%.MAKE,$(SUBDIRS)) ;

.PHONY: post-install
