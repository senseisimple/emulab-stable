<!--
   EMULAB-COPYRIGHT
   Copyright (c) 2000-2003 University of Utah and the Flux Group.
   All rights reserved.
  -->
<center>
<h2>Frequently Asked Questions</h2>
</center>

<h2>Contents</h2>
<ul>
<li> <a href="#GS">Getting Started</a>
     <ul>
     <li> <a href="#GS-Eligible">Who is Eligible to use Emulab.Net?</a>
     <li> <a href="#GS-1">How do I start a project?</a>
     <li> <a href="#GS-2">How do I join a project?</a>
     <li> <a href="#GS-2b">I'm a project leader, and someone applied
	                   to join my project, but they're not on the 
	                   list to be approved.</a>
     <li> <a href="#GS-2c">Will Emulab send me email messages?</a>
     <li> <a href="#GS-3">I have an Emulab account. Now what?</a>
     <li> <a href="#GS-PATH">Do I need to change my PATH variable?</a>
     <li> <a href="#GS-4">Can I be in more than one project?</a>
     <li> <a href="#GS-5">Can I change my Emulab password?</a>
     <li> <a href="#GS-6">I'm a project leader. Can I designate TAs?</a>
     <li> <a href="#GS-7">Where do I get help?</a>
     </ul>

<li> <a href="#UTT">Using the Testbed</a>
     <ul>
     <li> <a href="#UTT-1">Is there a tutorial?</a>
     <li> <a href="#UTT-NETBUILD">Do you have a <b>GUI</b> to help me
                                   create experiments?</a>
     <li> <a href="#UTT-TOPO">Are there any constraints on my topology?</a>
     <li> <a href="#UTT-NODES">How many nodes can I ask for?</a>
     <li> <a href="#UTT-HOWLONG">How long can I keep using my nodes?</a>
     <li> <a href="#UTT-TOOFEW">What if I need more nodes than are free?</a>
     <li> <a href="#UTT-2">Do I get root access on my nodes?</a>
     <li> <a href="#UTT-3">Do my nodes have consoles I can look at?</a>
     <li> <a href="#UTT-TUNNEL">How do I connect directly to node consoles, 
                                without going through <b>users</b>?</a>
     <li> <a href="#UTT-4">Can I reboot (power cycle) my nodes?</a>
     <li> <a href="#UTT-SCROGGED">I've scrogged my disk! Now what?</a>
     <li> <a href="#UTT-5">Where do I store files needed by my experiment?</a>
     <li> <a href="#UTT-6">Are my files on <b>users.emulab.net</b>
                           backed up (filesaved)?</a>
     <li> <a href="#UTT-7">Are the nodes in my experiment backed up
                           (filesaved)?</a> 
     <li> <a href="#UTT-Swapping">What is Swapping?</a> 
     <li> <a href="#UTT-Restart">What is Experiment Restart?</a> 
     <li> <a href="#UTT-8">How can I get switch statistics (such as packet
                           counts) for my experiment?</a> 
     <li> <a href="#UTT-Naming">What names should I use to refer to the
			   nodes in my experiment?</a>
     </ul>

<li> <a href="#HDS">Hardware setup</a>
     <ul>
     <li> <a href="#HDS-1">How many nodes are there?</a>
     <li> <a href="#HDS-2">How many nodes are currently available?</a>
     <li> <a href="#HDS-3">How many ethernet cards are on each node?</a>
     <li> <a href="#HDS-4">How many nodes are currently available (free)?</a>
     <li> <a href="#HDS-5">Can I do traffic shaping on my links?</a>
     <li> <a href="#HDS-6">Can I modify the traffic shaping
                           parameters on my links?</a>
     <li> <a href="#HDS-7">Are there other traffic shaping parameters
                           besides latency, bandwidth, and PLR?</a>
     </ul>

<li> <a href="#SWS">Software setup</a>
     <ul>
     <li> <a href="#SWS-1">What OS do the nodes run?</a>
     <li> <a href="#SWS-2">How do I select which OS to run on each node?</a>
     <li> <a href="#SWS-3">Can I load my own software (RPMs) on my nodes?</a>
     <li> <a href="#SWS-4">Can I schedule programs to run
                           automatically when a node boots?</a>
     <li> <a href="#SWS-5">How can I turn on routing or set up routes
			   automatically in my nodes?</a>
     <li> <a href="#SWS-6">How does my software determine when other
                           nodes in my experiment are ready?</a>
     <li> <a href="#SWS-7">Can I run my own Operating System?</a>
     <li> <a href="#SWS-8">What if I need more disk space on my nodes?</a>
     <li> <a href="#SWS-9">Are there testbed-specific daemons that could
                           interfere with my experiment?</a>
     <li> <a href="#SWS-10">Does Emulab support IP Multicast?</a>
     </ul>

<li> <a href="#SEC">Security Issues</a>
     <ul>
     <li> <a href="#SEC-1">Is Emulab Firewalled?</a>
     </ul>

<li> <a href="#TR">Troubleshooting</a>
     <ul>
     <li> <a href="#TR-1">My experiment is set up, but I cannot
     			  send packets between some of the nodes. Why?</a>
     <li> <a href="#TR-2">I asked for traffic shaping, but everything
			  seems to be going at full LAN speeds. 
			  What's wrong?</a>
     <li> <a href="#TR-3">I set a non-zero packet-loss (or delay) but 'ping'
                          shows no packet-loss (or delay). Why?</a>
     <li> <a href="#TR-4">I set a non-zero packet-loss (or delay) but 'ping'
                          shows a different packet-loss (or delay). Why?</a>
     </ul>
</ul>

<hr>

<a NAME="GS"></a>
<font size='+1'><b>Getting Started</b></font>
<ul>
<li><a NAME="GS-Eligible"></a>
    <font size='+1'><b>Who is Eligible to use Emulab.Net?</b></font>
    <p>
    In principle, almost any research or educational use
    by those that have a need for it is appropriate and encouraged.
    This includes use by universities, industrial research labs, and both
    US and non-US institutions.   With some provisos, use for development
    and evaluation is also acceptable, even by companies.
    See our <a href ="docwrapper.php3?docname=policies.html">posted policies</a>
    for more detail.  If you are unsure about your eligibility to use
    Netbed/Emulab, please just send us an email inquiry.
    </p>

<li><a NAME="GS-1"></a>
    <font size='+1'><b>How do I start a project?</b></font>
    <p>
    If you are new to the Testbed, simply click on the "Start Project"
    link on the Emulab <a href="http://www.emulab.net">Home
    Page</a>. You will need to fill in the forms with your personal
    information and information about the project. Then click on the
    "Submit" button. Within a few days you will be contacted via email
    with an approval message. More information about starting projects
    can be found in <a href="docwrapper.php3?docname=auth.html">
    Authorization Page</a>.
    </p>
    <p>
    If you already have an Emulab account, and wish to start a second
    project, first log into the Web Interface. Then select the "Start
    Project" link; all of the personal information will already be
    filled in. You will need to complete just the project information
    section. 
    </p>

<li><a NAME="GS-2"></a>
    <font size='+1'><b>How do I join a project?</b></font>
    <p>
    If you are new to the Testbed, simply click on the "Join Project"
    link on the Emulab <a href="http://www.emulab.net">Home
    Page</a>. You will need to fill in the form with your personal
    information, and provide the name of the project you are trying to
    join (typically, the <i>Project Leader</i> will have told you the
    name of the project). Then click on the "Submit" button, and wait
    for an email with your new user key. When that email arrives, use
    the link in it (or the key itself), and use it with your password 
    to log into the web site and verify your account. Then just wait
    for the project leader to approve you.  When approved you will
    receive an email message saying so, and you can then log into the
    Testbed.
    </p>

<li><a NAME="GS-2b"></a>
    <font size='+1'><b>I'm a project leader, 
    and someone applied to join my project,
    but they're not on the list to be approved.</b></font>    
    <p>
      Joining a project has 3 stages. The first two are done by
      the person trying to join, and they both must be completed
      before you can approve their application. The first two are
      outlined <a href="#GS-2">in the previous question</a>, where the
      user fills out the "Join Project" form, and performs account
      verification. After these two steps are both complete, the
      project leader and any group leaders in the group 
      (<a href="#GS-6">More info here</a>) will get an email saying
      the account is ready to be approved, and it will appear on the
      list of new users waiting to be approved.
    <p>
      If someone says they've applied, but you haven't received an
      email from Emulab about it, and they don't show up on your
      list, the most likely cause is that they haven't finished the
      verification step.
    </p>

<li><a NAME="GS-2c"></a>
    <font size='+1'><b>Will Emulab send me email messages?</b></font>
    <p>
      Yes! Emulab uses email notifications to you in several different
      ways. Often it will send you a copy of information regarding
      experiments you set up, applications to projects, and other
      things you do at Emulab. Sometimes (like with account
      verification) the email is a critical part of being able to use
      Emulab.
    <p>
      For those reasons it is <b>critical</b> that any spam filtering
      software you have accept email from Emulab itself (anything
      coming from the emulab.net domain) and from Emulab staff (from
      the cs.utah.edu or flux.utah.edu domains). In many cases, it may
      also say that is from a specific machine in those domains. Our
      messages usually do not get flagged as spam by most filters, but
      in certain cases it can be a problem. It is also important that
      it not require manual intervention or confirmation to get emails
      through to you, so programs like SpamKiller can cause problems.
    <p>
      It is also important to read your email often while you are
      using Emulab, especially while you have machines reserved in 
      an experiment. A few emails may be the only notification you'll
      get before we swap out an experiment that appears to be idle,
      and if you don't respond, you may lose important work. Email is
      also our method for informing you about problems we may be
      experiencing, downtimes, or other important announcements. Your
      experience with Emulab (and ours with you) will be much more
      pleasant if everyone is responsive to email.
    </p>

<li><a NAME="GS-3"></a>
    <font size='+1'><b>I have an Emulab account. Now what?</b></font>
    <p>
    Once you have been approved to start (or join) your first project,
    you will be able to log into Emulab's user machine,
    <b>users.emulab.net</b>. We require that all Emulab users use ssh. For
    example, if your Emulab account name is "joe", then you would do:
    <pre>
	ssh users.emulab.net -l joe		</pre>
    </p>
    <p>
    Your password is the same as the password you supplied to the
    Start (or Join) Project web page.

<li><a NAME="GS-PATH"></a>
    <font size='+1'><b>Do I need any 
    special directories in my PATH variable?</b></font>
    <p>
    There are several useful (although not required) programs installed on
    <tt>users.emulab.net</tt> in <tt>/usr/testbed/bin</tt>. You should edit
    your dot files to include that directory in your search path. 
    </p>

<li><a NAME="GS-4"></a>
    <font size='+1'><b>Can I be in more than one project?</b></font>
    <p>
    Yes. You may join (and/or start) as many projects as you like,
    subject to Emulab <a href="docwrapper.php3?docname=policies.html">
    administrative policies</a>.
    </p>

<li><a NAME="GS-5"></a>
    <font size='+1'><b>Can I change my Emulab password?</b></font>
    <p>
    Yes. You can change your Emulab Web password and your Emulab login
    password (the password you use to log into <b>users.emulab.net</b>, as
    well as nodes in your experiments). To change your password,
    simply click on the "Update User Information" in the menu to your
    left, and then enter your new password in the location provided.
    Your new password will be installed on <b>users.emulab.net</b>
    immediately. Your experimental nodes will get the new password
    when they reboot.
    </p>

<li><a NAME="GS-6"></a>
    <font size='+1'><b>I'm a project leader. Can I designate TAs?</b></font>
    <p>
    Yes. To designate a TA, you must first create a project
    <em>group</em>. A project group is a lot like a unix group, and
    in fact unix groups is the mechanism used to protect members of
    one group from members of another group. When you create a group,
    you designate a <em>group leader</em> who is responsible for
    approving users who apply to join the group. Group leaders may
    also terminate experiments that have been created by members of
    the group. As Project Leader, you may also shift members of your
    project in and out of your project's groups as you like, and you
    are automatically a member of all groups within your project. As a
    convenience, all new projects are created with one new group,
    termed the <em>default group</em>. As its name implies, whenever
    the group is left unspecified in a form, it defaults to the
    project group (this allows you to create a project without any sub
    groups at all; new members join the default group, new experiments
    are created in the default group, etc.).
    </p>

    <p>
    Project groups are created via the Project Information link at
    your left. Simply go to the project page in which you want to
    create a group, and look for the "Create New Group" link. More
    information on project groups is available via the <a
    href="doc.php3">Emulab Documentation</a> page in the
    <a href="docwrapper.php3?docname=groups.html">Groups Tutorial</a>.
    </p>

<li><a NAME="GS-7"></a>
    <font size='+1'><b>Where do I get help?</b></font>
    <p>
    If you cannot find an answer to your question in the
    <a href="doc.php3">Emulab Documentation</a>, then you can
    send us an <a href="emailus.php3">email message</a>. We will try
    to answer your question as quickly as we can.
    </p>
</ul>

<hr>

<a NAME="UTT"></a>
<font size='+1'><b>Using the Testbed</b></font>
<ul>
<li><a NAME="UTT-1"></a>
    <font size='+1'><b>Is there a tutorial?</b></font>
    <p>
    Yes, we have an extensive <a href="tutorial/tutorial.php3">tutorial</a>
    on using the Testbed.
    </p>

<li><a NAME="UTT-NETBUILD"></a>
    <font size='+1'><b>Do you have a GUI to 
    help me create experiments?</b></font>
    <p>
    Yes, we provide a GUI that gives you an easy to use drawing
    palette on which you can place nodes, lans, and links. Testbed
    specific attributes such as operating system, hardware type, and
    link/lan characteristics, may be attached to each object. With a
    single click, you can instantiate your new topology on the Testbed
    as an experiment in one of your projects. Alternatively, you can
    save the auto-generated NS file on your machine, edit as required,
    and then submit it later when creating an experiment.
    </p>
    
    <p>
    To access the GUI, please log in and go to the Begin Experiment page.
    <em>Note: you need a Java compliant browser.</em>
    </p>

<li><a NAME="UTT-TOPO"></a>
    <font size='+1'><b>Are there any constraints on my topology?</b></font>
    <p>
    Yes, but only those imposed by the physical hardware that is
    currently available in our testbed. The constraints that people
    most commonly run into are the maximum speed of our links
    (100Mbps) and the maximum number of network interface cards (NICs)
    in our machines. You can't get any links faster than 100Mbps,
    since we don't yet have gigabit links for experimenters to
    use. Our nodes each have 4 experimental network interfaces, so
    each node can be a member of up to 4 links or LANs. A good
    strategy for making your topology fit within those limits is to
    replace multiple links to a node with a LAN or with a router
    node. Ask Testbed Operations if you need further assistance.
    </p>

<li><a NAME="UTT-NODES"></a>
    <font size='+1'><b>How many nodes can I ask for?</b></font>
    <p>
    You can ask for as many nodes as are currently available! You can
    click on the "Node Reservation Status" link at your left to see
    how many nodes are currently free. If you ask for more than are
    currently available, your experiment will be rejected (you
    will receive email notification shortly after you submit your NS
    file to the web interface).
    </p>

    <p>
    <em>We urge all new Emulab users to begin with a small 3-4 node
    experiment so that you will become familiar with NS syntax and the
    practical aspects of Emulab operation.</em>
    </p>

<li><a NAME="UTT-HOWLONG"></a>
    <font size='+1'><b>How long can I keep using my nodes?</b></font>
    <p>
    You can keep them as long as you need them, subject to our <a
    href="docwrapper.php3?docname=swapping.html">Node Usage
    Policies</a>.  In general, you should do your work, and then
    terminate your experiment as soon as you're done with it. If
    you're not done with it, but are through for a while, you should
    probably "swap out" your experiment (See the question <a
    href="#UTT-Swapping">What is Swapping</a> in this FAQ). It is
    especially important to swap out your experiment if you're through
    with it for the weekend. Emulab usually gets heavy use on the
    weekends by users who need to make very large experiments, so it
    is important to leave as many nodes available as possible.
    </p>

<li><a NAME="UTT-TOOFEW"></a>
    <font size='+1'><b>What if I need more nodes than are free?</b></font>
    <p>
    For example, say you need 50 nodes but there are only 40 free. In
    general, getting this many nodes is going to require intervention
    from Testbed Operations, if only so we can ask other experimenters
    to free up nodes, if possible. Please send us email if you are not
    able to able to get the number of nodes you need for your experiment.
    </p>

    <p>
    Another alternative is to use the
    <a href="tutorial/tutorial.php3#BatchMode">Batch System.</a> 
    If your experiment is amenable to being batched (does not require
    human intervention to start and stop), then you can submit a batch
    request, which will be serviced when enough nodes become
    available.  Typically, you would start out with a few nodes,
    getting used to the batch system and creating whatever scripts are
    needed to make the experiment batchable. Then scale up to larger
    numbers of nodes. Thats the easiest way of getting a lot of nodes!
    </p>    
    
<li><a NAME="UTT-2"></a>
    <font size='+1'><b>Do I get root access on my nodes?</b></font>
    <p>
    Yes. Project leaders get root access to all of the nodes in all of
    the experiments that are running in their project. Project members
    get root if their project leader grants them root access, when the
    leader approves the group <a href="#GS-1">membership request</a>.
    Root privileges are granted via the <code>sudo</code> command. The
    <a href="tutorial/tutorial.php3#RootAccess">tutorial</a> describes
    this in more detail.
    </p>

<li><a NAME="UTT-3"></a>
    <font size='+1'><b>Do my nodes have consoles I can look at?</b></font>
    <p>
    Yes. Each of the PCs has its own serial console line with which you can
    interact, either directly from your desktop (see next FAQ entry),
    or by hopping through the "users" machine,
    using our <tt>console</tt> program. To connect over serial line to
    "pc1" in your experiment, ssh into <b>users.emulab.net</b>, and
    then type <tt>console pc1</tt> at the Unix prompt. You may then
    interact with the serial console (hit "enter" to elicit output from
    the target machine).
    </p><p>
    In any case, all console output from each node is saved
    so that you may look at it it later. For each node,
    the console log is stored as <tt>/var/log/tiplogs/pcXXX.run</tt>.
    This <em>run</em> file is created when nodes are first allocated
    to an experiment, and the Unix permissions of the run files permit
    only members of the project to view them. When the nodes are
    deallocated, the run files are cleared, so if you want to save
    them, you must do so before terminating the experiment. 
    </p>
    <p>
    The Sharks also have serial console lines, but because of the
    limited number of serial ports available on <b>users.emulab.net</b>, only
    one Shark, the last or "eighth", on each shelf has a console line
    attached. To connect to that shark, you would type <tt>console shXX</tt>
    at the Unix prompt, where "XX" is the shark shelf number. The
    shark shelf number is the first digit in the name. Using shark
    sh16-8 as an example, the shelf number is sixteen, and the number
    of the node on the shelf is eight.
    </p>

<li><a NAME="UTT-TUNNEL"></a>
    <font size='+1'><b>How do I connect directly to node consoles, 
        without going through <b>users</b>?</b></font>
    <p>
    Clicking "Connect to Serial Line"
    in the Node Options page will send your browser a "text/x-testbed-acl"
    ".tbacl" file. 
    In windows, if you have installed <code>tiptunnel</code>, available
    below, you can save this file in a folder and double-click it
    to launch a tunneled connection to your node.
    In FreeBSD or Linux, you can save the file and pass it as an argument
    to <code>tiptunnel</code>, or associate it with
    <code>tiptunnel</code> in your web browser.
    Upon connection you typically first have to hit "enter" to
    elicit output from the target machine.

<!--
    If you have downloaded <code>tiptunnel</code> and set it as the 
    handler for that MIME type, <code>tiptunnel</code> will launch a new 
    telnet running in a new xterm (this may take a few seconds.) 
    That telnet will be connected to a local port, 
    which is tunneled through SSL to your node's console. 
    Closing the xterm, exiting telnet, or killing <code>tiptunnel</code>
    itself will end the connection. -->
    
    </p>
    <ul>
    <li>
    You can download the <code>tiptunnel</code>
    <a href="downloads/tiptunnel-win32.exe">installer for Windows here</a>.
    </li>
    <li>
    You can download the <code>tiptunnel</code> statically-linked x86
    <a href="downloads/tiptunnel-freebsd.tar.gz">binary for FreeBSD here</a>.
    </li>
    <li>
    You can download the <code>tiptunnel</code> statically-linked x86
    <a href="downloads/tiptunnel-linux.tar.gz">binary for Linux here</a>.
    </li>   
    <li>
    A source distribution will be available soon.
    </li>
    </ul>

    <font size='+1'><b>Instructions for Windows:</b></font>
    <ul>
      <li>Run the installer executable, and successfully complete the installation.</li>
      <li>In the Web Interface Node view, 
          click on the "Connect to serial line" link.</li>
      <li><b>Save</b> the resulting .tbacl file in an appropriate place.
          (for instance a folder off the desktop.)</li>
      <li>For the lifetime of your experiment, you can simply double-click
          these .tbacl files to connect.</li>
    </ul> 

    <font size='+1'><b>Instructions for Linux/FreeBSD:</b></font>
    <ul>
    <li>Use <code>gunzip</code>, 
    then <code>tar xvf</code> on the downloaded file.</li>
    <li>Move the resulting <code>tiptunnel</code> binary into 
    a directory of your choice (<code>/usr/local/bin</code>, 
    or <code>~/bin</code> are two good places.)</li>
    <li>Set up your browser to handle MIME type "text/x-testbed-acl"
    as outlined below.</li>
    <li>In the Web Interface Node view, 
        click on the "Connect to serial line" link.</li>
    <li>If your browser is properly configured to use <code>tiptunnel</code>,
        a new xterm window with a telnet session open to your node
        should emerge.</li>
    <li>(Alternately, you can tell your browser to save "text/x-testbed-acl"
        files in a directory and you can run them with 
	<code>tiptunnel</code> directly;
        this may be more convenient than using the 
	web interface every time you wish
        to connect to a node in your experiment.
        Note that these files are valid for the 
	lifetime of your experiment.)</li>
    </ul>

    <font size='+1'><b>Linux/FreeBSD and Netscape 4.7:</b></font>
    <ul>
    <li>Choose <code>preferences</code> from the <code>edit</code> menu.</li>
    <li>Select <code>Navigator</code>, then <code>Applications</code> under
        it.</li>
    <li>Click the <code>New...</code> button.</li>
    <li>In the <code>MIMEType</code> box, type <code>text/x-testbed-acl</code>
    </li>
    <li>In the <code>Suffixes</code> box, type <code>tbacl</code></li>
    <li>Choose <code>Application</code> in the <code>Handled by</code>
        box</li>
    <li>Next to <code>Application</code>, either type the path to the
        <code>tiptunnel</code> binary, or use <code>Choose...</code> to find
        it.</li>
    <li>Now, <b>be sure to</b> put a space, then <code>%s</code> after the
        path to the application in the box. This tells netscape to actually
        pass the aclfile into tiptunnel (Mozilla does not require this;
        see below.)</li>
    <li>Click <code>OK</code>, then <code>OK</code> again.</li>
    <li>Clicking a "connect to serial line" link should now
        bring up a connection in an xterm window.</li>
    </ul> 

    <font size='+1'><b>Linux/FreeBSD and Mozilla:</b></font>
    <ul>
    <li>Choose <code>preferences</code> from the <code>edit</code> menu.</li>
    <li>Select <code>Navigator</code>, then <code>Helper Applications</code> 
        under it.</li>
    <li>Click the <code>New Type...</code> button.</li>
    <li>In the <code>MIMEType</code> box, 
    type <code>text/x-testbed-acl</code></li>
    <li>In the <code>File extension</code> box, type <code>tbacl</code></li>
    <li>For <code>Application to use</code>, either type the path to the
        <code>tiptunnel</code> binary, or use <code>Choose...</code> to find
	it.</li>
    <li>In Mozilla do <b>not</b> add a <code>%s</code>.</li>
    <li>Click <code>OK</code>, then <code>OK</code> again.</li>
    <li>Clicking a "connect to serial line" link should now
        bring up a connection in an xterm window.</li>
    </ul> 
    </p>

<li><a NAME="UTT-4"></a>
    <font size='+1'><b>Can I reboot (power cycle) my nodes?</b></font>
    <p>
    Yes. Each of the PCs is independently power controlled. If your
    node becomes wedged, or otherwise unresponsive, you can use the
    <tt>node_reboot</tt> command, as discussed in the
    <a href="tutorial/tutorial.php3#Wedged">Emulab Tutorial.</a>
    </p>
    <p>
    The Sharks are also power controlled, but because of the limited
    number of power ports available, the entire shelf of 8 sharks is
    on a single controller. The <tt>node_reboot</tt> does its best to
    cleanly reboot individual sharks, but if a single shark is
    unresponsive, the entire shelf will be power cycled.
    </p>

<li><a NAME="UTT-SCROGGED"></a>
    <font size='+1'><b>I've scrogged my disk! Now what?</b></font>
    <p>
    If you manage to corrupt a disk (or slice), no worries. You can easily
    repair the damage yourself by reloading a fresh copy of the default
    disk image. You will of course lose anything you have stored on that
    disk; it is a good idea to store only data that can be easily recreated, 
    or else store it in your project directory in <tt>/proj</tt>. Disk
    reloading is covered in more detail in the
    <a href="tutorial/tutorial.php3#Scrogged">Emulab Tutorial</a>.
    </p>

<li><a NAME="UTT-5"></a>
    <font size='+1'><b>Where do I 
    store files needed by my experiment?</b></font>
    <p>
    Each project has its own directory, rooted at <tt>/proj</tt>,
    which is available via NFS to all of the nodes in experiments
    running in that project. For example, when the "RON" project was
    created, a directory called /proj/RON was also created. This
    directory is owned by the project creator, and is in the unix
    group "RON." Its permission (mode) is 770; read/write/execute
    permitted by the project creator and by all of the members of the
    project RON, but protected against all access by people outside
    the RON project.
    </p>
    <p>
    Project members are encouraged to store any files needed by their
    experiments in the corresponding /proj project directory. 
    </p>

<li><a NAME="UTT-6"></a>
    <font size='+1'><b>Are my files on 
    <b>users.emulab.net</b> backed up (filesaved)?</b></font>
    <p>
    Yes. All of the files in your home directory on /users, and all of
    the files in your project directory in /proj are filesaved. While
    we can restore lost files in an emergency, we encourage you to
    back up critical data on your own to avoid (possibly long) delays
    in conducting your experiments.
    </p>
    
<li><a NAME="UTT-7"></a>
    <font size='+1'><b>Are the nodes 
    in my experiment backed up (filesaved)?</b></font>
    <p>
    No! The nodes in your experiment are not filesaved. Any changes
    you make to the local filesystems will be lost if the event of a
    disk failure. We plan to provide a mechanism for experimenters to
    create snapshots of their node state, but that is not done yet. In
    the meantime, any files that must not be lost should be stored in
    the project directory (/proj/<project_name>), which is available
    via NFS to all of the nodes in your experiment. You may also store
    files in your home directory (/users/<login>), also available via
    NFS to all of your nodes, but that is not the preferred location
    since quotas on /users are relatively small.
    </p>
    
<li><a NAME="UTT-Swapping"></a>
    <font size='+1'><b>What is Swapping?</b></font>
    <p>
    Swapping is when you (or we) temporarily swap your experiment out,
    releasing all of the nodes in the experiment. Your experiment is
    still resident in the Emulab database, and you can see its status
    in the web interface, but no nodes are allocated. Once an
    experiment is swapped out, you can swap it back in via the web
    interface by going to the Experiment Information page for your
    experiment, and clicking on the swapin option. 
    </p>

    <p>
    The <tt>swappable</tt> checkbox in the Begin Experiment web page
    is used to determine what experiments can be <em>automatically</em>
    swapped by the testbed scheduling system. Note that all experiments are
    capable of being swapped; even if you do not check the swappable box,
    you are free to swap your own experiments as you like. The only
    difference is that the testbed scheduling system will not consider your
    experiment when looking for experiments to swap out. You will sometimes
    notice that the Experiment Information page does not contain the swap
    link. That is because experiments cannot be swapped when they are in
    transition. For example, when the experiment is being swapped in (say,
    after first being created) the link will disappear until the experiment
    is fully swapped in, and it is capable of being swapped out. You will
    need to occasionally reload the page so that the updated state is
    recognized and the swap link appears. 
    </p>
    
    <p>
    Be aware that we do not currently save any files that you may have
    placed on your nodes. When your experiment is swapped back in, you
    will likely get different nodes, and with fresh copies of the disk
    images. For that reason, you should not swap your experiment out
    unless you make arrangements to save and restore any state you need.
    </p>

    <p>
    Make sure to take a look at our 
    <a href="docwrapper.php3?docname=swapping.html"> Node Usage Policies</a> 
    as well.
    </p>

<li><a NAME="UTT-Restart"></a>
    <font size='+1'><b>What is Experiment Restart?</b></font>
    <p>
    Experiment restart (or perhaps more aptly, replay) allows you to
    rerun your experiment from scratch, but without the added expense
    of a swapin and swapout. In other words, the nodes that are
    currently allocated to your experiment are all rebooted, and the
    experiment startup state is cleared. This includes the
    <a href="#SWS-6">ready bits</a>, the boot status in the web page,
    and the <a href="#SWS-4">startup command status</a>. In addition,
    the event scheduler for the experiment is restarted, and your event
    sequence is replayed again. Note that your rpms and tarfiles are
    <b>not</b> installed again. Replay is obviously faster than
    swapout/swapin, and has the added benefit that you will not run
    the risk of not being able to swapin for lack of available nodes.
    </p>

<li><a NAME="UTT-8"></a>
    <font size='+1'><b>How can I 
    get switch statistics (such as packet counts) for my experiment?</b></font>
    <p>
    We have a command called <code>portstats</code> that allows you access
    to some of the port counters on our switches. To use it, you'll need
    to ssh to <b>users.emulab.net</b>. '<code>portstats &lt;pid&gt; 
    &lt;eid&gt;</code>' will get you stats for all experimental interfaces in
    your experiment. Run '<code>portstats -h</code>' to get a list of other
    options, such as different sets of stats.
    </p>

    <p>
    Note that the numbers returned by <code>portstats</code> do not get
    reset between experiments.
    </p>

<li><a NAME="UTT-Naming"></a>
    <font size='+1'><b>What names should I use to refer to the nodes in my
    experiment?</b></font>

    <p>We set up names for your nodes in DNS, for use from outside,
    and <code>/etc/hosts</code> files for use on the nodes in the experiment.
    Since our nodes have multiple interfaces (the control network, and,
    depending on the experiment, possibly several experimental interfaces,)
    determining which name refers to which interface can be somewhat
    confusing. The rules below should help you figure this out.
    </p>

    <ul>
	<li><b>From the outside world</b> - 
	We set up names in the form
	<code><i>node</i>.<i>expt</i>.<i>proj</i>.emulab.net</code> in DNS,
	so that they visible anywhere on the Internet. This name always refers
	to the node's control network interface, which is the only one
	reachable from the outside world.
	</li>

	<li><b>On the nodes themselves</b> -
	There are three basic ways to refer to the interfaces of a node. The
	first is stored in DNS, and the second two are stored on the node in
	the <code>/etc/hosts</code> file.
	<ol>
	    <li><i>Fully-qualified hostnames</i> - These names the same ones
	    visible from the outside world, and referred to by attaching the
	    full domain name: ie.
	    <code><i>node</i>.<i>expt</i>.<i>proj</i>.emulab.net</code>. (note
	    that, since we put <code>.emulab.net</code> in nodes' domain
	    search paths, you can use
	    <code><i>node</i>.<i>expt</i>.<i>proj</i></code> as a shorthand.)
	    This name always refers to the control network
	    </li>

	    <li><i><code>node-link</code> form</i> - You can refer to an
	    individual experimental interface by suffixing it with the name of
	    the link or LAN (as defined in your NS file) that it is a member
	    of. For example, <code>nodeA-link0</code> or
	    <code>server-serverLAN</code>. This is the preferred way to refer
	    to experimental interfaces, since it uniquely and unambiguously
	    identifies an interface.
	    </li>

	    <li><i>Short form</i> - If a node is directly connected to the
	    node you're on, you can refer to that node simply with its name
	    (eg. <code>nodeA</code>.) Note that this differs from the fully-
	    qualified name in that no domain is given. If you have enabled
	    <a href="#SWS-5">routing</a>, we also create short names for 
	    any node that you have a route to. However, if two nodes are
	    connected with more than one interface, or there is more than
	    one route between them, there is no guarantee that the short name
	    has been associated with the one is on the 'best' (ie. shortest or
	    highest bandwidth) path - so, if there is ambiguity, we strongly
	    suggest that you use the <code><i>node-link</i></code> form.
	    </li>
	</li>
    </ul>

</ul>

<hr>


<a NAME="HDS"></a>
<font size='+1'><b>Hardware Setup</b></font>
<ul>
<li><a NAME="HDS-1"></a>
    <font size='+1'><b>What kind of computers are used for my nodes?
<li><a NAME="HDS-2"></a>
    How many nodes are there?
<li><a NAME="HDS-3"></a>
    How many ethernet cards are on each node?</b></font>
    <p>
    Please see the <a href="docwrapper.php3?docname=hardware.html">
    Hardware Overview</a> page for a description and count of the
    computers that comprise the Testbed.
    </p>
    
<li><a NAME="HDS-4"></a>
    <font size='+1'><b>How many nodes are currently available (free)?</b></font>
    <p>
    If you click on the "Node Reservation Status" link in the menu to
    your left, you will see a summary of the number of nodes (by type)
    that are currently available, followed by a listing of the
    reservation status of each individual node.
    </p>
    
<li><a NAME="HDS-5"></a>
    <font size='+1'><b>Can I do traffic shaping on my links?</b></font>
    <p>
    Yes! You can specify the delay, bandwidth, and packet loss rate
    between any two nodes in your topology. Bandwidth and delay are
    specified in the NS <tt>duplex-link</tt> statement, while packet
    loss rate is specified with the Emulab <tt>tb-set-link-loss</tt>
    extension to NS. You may also specify delay, bandwidth, and packet
    loss rate between nodes in a regular LAN.
    </p>
    <p>
    Please see the
    <a href="tutorial/docwrapper.php3?docname=nscommands.html">Extensions</a>
    page for a summary of all Emulab NS extensions, and the
    <a href = "tutorial/tutorial.php3">Emulab Tutorial</a> for an
    example. 
    </p>

<li><a NAME="HDS-6"></a>
    <font size='+1'><b>Can I modify the 
    traffic shaping parameters on my links?</b></font>
    <p>
    Yes! If your NS file specified traffic shaping on a link, then you
    can subsequently modify those parameters after the experiment has
    been swapped in. Note that you cannot <em>convert</em> a non shaped
    link into a shaped link; you can only modify the traffic shaping
    parameters of a link that is already being shaped.  To modify the
    parameters, go to the Experiment Information page of your
    experiment, and click on the "Control Traffic Shaping" menu
    option. Follow the instructions at the top of the page.
    </p>
    <p>
    An alternative method is to log into <b>users.emulab.net</b> and use the
    <tt>delay_config</tt> program. This program requires that you know
    the symbolic names of the individual links. This information is
    available via the web interface on the Experiment Information
    page. The command line syntax for <tt>delay_config</tt> will be
    displayed when the <tt>-h</tt> option is given.
    </p>

<li><a NAME="HDS-7"></a>
    <font size='+1'><b>Are there other 
    traffic shaping parameters besides latency,
    bandwidth, and packet loss rate?</b></font>
    <p>
    Yes! Please see the
    <a href="tutorial/docwrapper.php3?docname=advanced.html">
    advanced tutorial</a>. Note though, that these other parameters
    can be specified for duplex links only (not lans), and that they
    are not configurable with <tt>delay_config</tt>, but with a
    different testbed utility call <tt>tevc</tt> (also described in
    the advanced tutorial).
    </p>    

</ul>

<hr>

<a NAME="SWS"></a>
<font size='+1'><b>Software Setup</b></font>
<ul>
<li><a NAME="SWS-1"></a>
    <font size='+1'><b>What OS do the nodes run?</b></font>
    <p>
    Please see the <a href="docwrapper.php3?docname=software.html">
    Software Overview</a> page for a description of the Operating
    Systems that can be run on each of the Testbed nodes.
    </p>

<li><a NAME="SWS-2"></a>
    <font size='+1'><b>How do I select which OS to run on each node?</b></font>
    <p>
    When a choice of OS is available, you may specify which one you
    prefer for each node in the NS file using the Emulab
    <tt>tb-set-node-os</tt> extension to NS. When your experiment is
    configured, the appropriate disk image will be loaded on your
    nodes, and the selected operating system will boot up on each.
    </p>
    <p>
    Please see the
    <a href="tutorial/docwrapper.php3?docname=nscommands.html">Extensions</a>
    page for a summary of all Emulab NS extensions, and the
    <a href = "tutorial/tutorial.php3">Emulab Tutorial</a> for an
    example. 
    </p>    
    
<li><a NAME="SWS-3"></a>
    <font size='+1'><b>Can I load my own software (RPMs) on my nodes?</b></font>
    <p>
    Yes! If have an RPM (or more than one) that is appropriate for
    loading on the OS you have selected, you can arrange to have them
    loaded automatically when your experiment is configured. The
    Emulab NS extension <tt>tb-set-node-rpms</tt> is used in the NS
    file to specify a list of RPMS to install. You may specify a
    different list for each node in the experiment. When the node
    first boots after the experiment is configured, each of the RPMs
    will be installed (but only RPMs that have not already been
    installed). 
    </p>
    <p>
    Please see the
    <a href="tutorial/docwrapper.php3?docname=nscommands.html">Extensions</a>
    page for a summary of all Emulab NS extensions, and the
    <a href = "tutorial/tutorial.php3">Emulab Tutorial</a> for an
    example. 
    </p>    
    
<li><a NAME="SWS-4"></a>
    <font size='+1'><b>Can I schedule 
    programs to run automatically when a node boots?</b></font>
    <p>
    Yes! You can arrange to run a single program or script when your
    node boots. The script is run as the UID of the experiment
    creator, and is run after all other node configuration (including
    RPM installation) has completed. The exit status of the script (or
    program) is reported back and is made available for you to view in
    Experiment Information link in the menu at your left. The Emulab
    NS extension <tt>tb-set-node-startup</tt> is used in the NS file
    to specify the path of the script (or program) to run. You may
    specify a different program for each node in the experiment.
    </p>
    <p>
    Please see the
    <a href="tutorial/docwrapper.php3?docname=nscommands.html">Extensions</a>
    page for a summary of all Emulab NS extensions, and the
    <a href = "tutorial/tutorial.php3">Emulab Tutorial</a> for an
    example.
    </p>    

<li><a NAME="SWS-5"></a>
    <font size='+1'><b>How can I turn on routing or set up routes automatically 
    in my nodes?</b></font>
    <p>
    By default, we do not setup any static routes or run any routing daemon
    on nodes in an experiment.  However, we do provide several options for
    experimenters, which are described in the
    <a href="tutorial/tutorial.php3#Routing">"Setting up IP routing
    between nodes"</a> section of the
    <a href="tutorial/tutorial.php3">Emulab Tutorial.</a>
    </p>
    
<li><a NAME="SWS-6"></a>
    <font size='+1'><b>How does my software determine when other nodes in my
    experiment are ready?</b></font>
    <p>
    If your application requires synchronization to determine when all
    of the nodes in your experiment have started up and are ready to
    proceed, then you can use the Testbed's <i>ready bits</i>
    mechanism. The ready bits are really just a way of determining how
    many nodes have issued the <b>ready</b> command, and is returned
    to the application as a simple N of M string, where N is the
    number that have reported in, and M is the total number of nodes
    in the experiment. Applications can use this as a very simplistic
    form of barrier synchronization, albeit one that can be used just
    once and one that does not actually block!
    </p>
    <p>
    Use of the ready bits is described in more detail in the <a href =
    "tutorial/tutorial.php3">Emulab Tutorial</a> and in the <a href =
    "doc/docwrapper.php3?docname=tmcd.html"> Testbed Master Control
    Daemon</a> documentation.
    </p>
    
<li><a NAME="SWS-7"></a>
    <font size='+1'><b>Can I run my own Operating System?</b></font>
    <p>
    Yes! You can run your own OS (or a customized version of an Emulab
    supported OS) on any of the PCs. You can also run <a href =
    "http://www.cs.utah.edu/flux/oskit/">OSKit</a> kernels on the
    PCs. Each of the PCs is partitioned with two DOS partitions large
    enough to hold the typical OS installation. The 1st and 2nd
    partitions are each 3GB. The 3rd partition is 500MB, and is
    labeled as Linux Swap. The 4th partition is the remainder of the
    disk, and varies in size depending on the pc type. We recommend
    that you use the 1st or 2nd partition; using the 4th partition
    will restrict the number of machines that you can run your OS on
    since it varies in size. Note that you must leave the MBR (Master
    Boot Record) in sector 0 alone, and that your custom partition
    must contain a proper DOS boot record in the first sector.
    </p>

    <p>
    Please note that while users are free to customize their disks and
    install their own operating systems, Emulab staff will not be able
    to offer more than encouragement and advice! We cannot install the
    OS for you, and we cannot load CDROMS, floppy disks, or tape drives!
    We <em>do</em> provide an easy way for you to boot FreeBSD from a
    memory based filesystem (MFS) so that you can more easily work
    with the disk (in case it is not possible to install your OS on a
    live disk). Beyond that, you are pretty much on your own!
    </p>

    <p>
    Many users had great success with customizing an Emulab supported
    OS (FreeBSD or Linux), and then creating a disk image that is
    autoloaded when the experiment is swapped in. We strongly
    encourage people to use this approach whenever possible! There is
    more information available in the <a
    href="tutorial/tutorial.php3#CustomOS">Custom OS</a> section of
    the <a href = "tutorial/tutorial.php3">Emulab Tutorial.</a>
    </p>

<li><a NAME="SWS-8"></a>
    <font size='+1'><b>What if I need more disk space on my nodes?</b></font>
    <p>
    Each node has a partition at the end of the disk that you can use if
    you wish. In Linux, the partition is <code>/dev/hda4</code> ; in FreeBSD,
    it's </code>/dev/ad0s4</code> . There is no filesystem on this partition,
    so you'll need to create it yourself. For example, in Linux:
    <blockquote>
	<code>
	    mkfs /dev/hda4;<br>
	    mount /dev/hda4 /mnt;
	</code>
    </blockquote>
    This partition is only 6 Gigs, the size of the leftover space on our
    smallest drives. If you need more space than this, it would be possible
    to enlarge this partition on some machines (for example, our pc850s
    have 40 GB disks), but that is outside the scope of this FAQ.
    </p>

<li><a NAME="SWS-9"></a>
    <font size='+1'><b>Are there testbed-specific 
    daemons that could interfere with my experiment?</b></font>
    <p>
    Probably not.
    By default, the testbed startup scripts currently start two daemons in 
    addition to the OS's standard set.  Other daemons may be started depending
    on the network services you ask for in your ns file (see below).
    </p>

    <p>
    <b>Unconditionally started daemons:</b>
    </p>

    <p>
    <blockquote>
    <li><code>healthd</code> - A low overhead hardware health monitor.</li>
    </blockquote>
    </p>

    <p> 
    This deamon periodically polls the machine's health monitoring
    hardware and sends this information back to our <code>boss</code>
    node for analysis.  The hardware is polled once per second, and a
    status datagram is sent out once every five minutes.
    <code>Healthd</code>'s overhead is quite low, but it can be safely
    killed and disabled from startup if you're worried about possible
    side effects.  It is started by
    <code>/etc/testbed/rc.healthd</code>.
    </p>

    <p>
    <blockquote>
    <li><code>slothd</code> - A low overhead usage analysis tool.</li>
    </blockquote>
    </p>

    <p>
    <code>Slothd</code> is important to efficient testbed utilization
    and should run on every node whenever possible.  Its overhead is
    almost negligible (essentially less than running <code>'ls -l
    /dev'</code> once every five minutes), and should not interfere with your
    work.  However if your experiment is exceptionally sensitive, then
    you may arrange with us to disable <code>slothd</code>.  Please
    note that we will restart this daemon if it is not running unless
    prior arrangements have been made.
    </p>

    <p>
    <b>Conditionally started daemons:</b>
    </p>

    <p>
    <blockquote>
    <li><code>gated</code> - A network routing daemon.</li>
    </blockquote>
    </p>

    <p>
    If you have requested automatic routing on your nodes with  
    <code>$ns&nbsp;rtproto&nbsp;Session</code> in your NS file, this will
    start <code>gated</code> on all of your nodes.
    </p>

    <p>
    We have left all daemons started by the operating systems' default
    configurations (such as <code>cron</code>) enabled, so you should also
    look at them if you are concered about running processes affecting
    your experiment.
    </p>

<li><a NAME="SWS-10"></a>
    <font size='+1'><b>Does Emulab support IP Multicast?</b></font>
    <p>
      In short, yes, the local nodes in Emulab (but not all remote
      Netbed nodes) support IP Multicast on the experimental
      network. In order to use it, you must have a kernel that
      supports it, and if you want multicast routing, you'll need to
      enable <code>mrouted</code>. (You can do it manually, or
      automatically via program objects or startup commands, but the
      rtproto commands will not do it.)
    </p>

</ul>

<hr>

<a NAME="SEC"></a>
<font size='+1'><b>Security Issues</b></font>
<ul>
<li><a NAME="SEC-1"></a>
    <font size='+1'><b>Is Emulab Firewalled?</b></font>
    <p>
    Yes. Emulab blocks all of the <i>low numbered</i> ports (ports below 1024),
    with the exception of ports 20 and 21 (FTP), 22 (Secure Shell), and 80
    (HTTP). This is for the protection of experimenters, as well as to ensure
    that an errant application cannot become the source of a Denial of Service
    attack to sites outside of Emulab. If your application requires external
    access to other low numbered ports, please contact us to make special
    arrangements.
    </p>
</ul>

<hr>

<a NAME="TR"></a>
<font size='+1'><b>Troubleshooting</b></font>
<ul>
<li><a NAME="TR-1"></a>
    <font size='+1'><b>My experiment is set up, but I cannot
	send packets between some of the nodes. Why?</b></font>
    <p>
    The most common reason is that your topology
    includes nodes which are not directly connected, and you have
    not setup any routing.  Refer to
    "<a href="#SWS-5">How can I turn on routing or set up routes
    automatically in my nodes?</a>" for details.  If you cannot
    send packets between two machines which are directly connected
    (via a link or a lan), then there are two possibilities:
    either the nodes did not properly negotiate their speed and
    duplex with the Cisco switch, or the physical wire is loose
    or bad.  In these cases, you should contact us for help.
    </p>

<li><a NAME="TR-2"></a>
    <font size='+1'><b>I asked for traffic shaping, 
    but everything seems to be going at full LAN speeds.  
    What's wrong?</b></font>
    <p>
    The most likely problem is that it is using the unshaped control
    network for the traffic you're looking at. This occurs when it
    tries to contact a node using a "pcXXX" address, like pc76 or
    pc76.emulab.net, or when it tries to ping a fully-qualified name,
    like NodeA.myexpt.myproj.emulab.net , which also resolves to a
    control network address. On one of your nodes, take a look at the
    file /etc/hosts . It shows the IP addresses and aliases that refer
    to the different experimental interfaces. These are the names/IPs
    you can use to see the delays.
    </p>

    <p>
    For instance, let's say I have an experiment that had NodeA and
    NodeB connected with a shaped link. The file /etc/hosts on NodeA
    would have a line for NodeB, with an address like 192.168.1.3, and
    on NodeB there would be an entry for NodeA with the address
    192.168.1.2. These addresses correspond to the delayed link
    between them. Any address outside the 192.168.*.* range that you
    didn't configure manually corresponds to an unshaped link.
    </p>

    <p>
    For a discussion of the way to 'name' interfaces on the control
    and experimental networks, see the the <a href="#UTT-Naming">naming
    section</a> of this document.
    </p>

<li><a NAME="TR-3"></a>
    <font size='+1'><b>I set a non-zero packet-loss (or delay) but 'ping'
        shows no packet-loss (or delay). Why?</b></font>
    <p>
    You are probably pinging through the control net interface. See this
    Troubleshooting <a href="#TR-2">FAQ entry</a>.
    </p>
    
<li><a NAME="TR-4"></a>
    <font size='+1'><b>I set a non-zero packet-loss (or delay) but 'ping'
        shows a different packet-loss (or delay). Why?</b></font>
    <p>
    Short answer: Ping is round trip, PLR and delay are "one way".
    </p>

    <p>
    Long Answer: If you're not seeing any traffic shaping at all
    (100Mbps, 0ms, 0plr), see <a href="#TR-2">this FAQ entry</a>. If
    you are seeing shaping, but something different than you
    expected, it is probably because link characteristics are one
    way, and you're measuring them over the round trip.
    </p>

    <p>
    For instance, if you asked for a link that was 100Mbps, 30ms,
    with 5% (0.05) packet loss rate (plr), you may expect ping to
    show 30ms ping times and 5% loss rate. But what you should see
    is 60ms latency for the round trip, and a loss rate of
    9.75%. Latencies can be added, therefore 30ms + 30ms gives
    60ms. However, loss rates are probabilities, and must be
    multiplied. The chance of a packet making it across a 5% lossy
    link is 95%, so with a 95% chance of arriving at the
    destination, and a 95% chance of returning if it made it there,
    and the total chance of making a round trip is .95 * .95 = .9025 or
    90.25%, or a round trip loss rate of 9.75% on a 5% lossy link.
    </p>

</ul>
